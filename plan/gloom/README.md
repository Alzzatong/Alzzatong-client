# 알짜통 개발진행공유 문서  
> CreateDate : 2023.10.26  
> UpdateDate :
## Rule 
1. 업데이트된 최신순이 가장 상단으로 올라온다.   
2. 기능이 추가되거나 변경될 시 업데이트를 진행하며, 사유와 방법에 대해 기입한다.    
3. 추가된 라이브러리가 있을 시, 추가적인 설명을 적는다.     
4. 날짜를 추가로 기입한다.      


<br></br>


### 2023.11.06
- <span style="color:red">문제 발생</span> : 저장할때 입력값과 조회할 때 출력값의 데이터 타입이 약간씩 다른 문제가 발생
  - id, created_at 값 필요없음
  - Radio버튼 템플릿화 한것은 value타입을 string값으로 변하는데, bool 타입을 저장해야되는 경우
  - 나름 해결책 : 입력값 전용 데이터 타입과 출력값 전용 데이터 타입을 만들어서 사용한다.
  - 파일 위치  : components/Company/Interface 

- <span style="color:blue">해야할 것</span> : `구인처 등록`저장할 때, (회사정보 저장 후, 구인 정보 저장함)중간에 실패했다면 전부 롤백하는 기능 필요!

<br></br>

### 2023.11.05
- <span style="color:red">문제 발생</span> : phoneInput에 데이터가 바로 들어가지 않는 현상 
  - 컴포넌트 안에 전화번호를 넣는 컴포넌트를 또하나 만들어 넣어놨지만, 데이터 조회하여 띄울때, 전화번호의 값은 반영이 안되는 문제가 발생 (저장은 됨)
1. 문제해결: supabase에서 조회시, 빈값오는 문제 -> supabase 테이블의 보안 정책문제로 권한을 부여해주면 해결된다.
2. 문제해결 : `TextAreaBox Warning`문제로 해당 컴포넌트가 동시에 value속성과 defaultValue속성을 가지고 있기때문에 React의 원칙에 위배
  - 둘중에 하나의 값을 삭제하면된다.  
3. 진행한 것 : 상담내역 저장 및 조회 
  - 상담내역에서 구인상태 -> 구인완료로 선택하면 날짜 입력칸을 띄운다.
  - 저장시, 리스트에 추가되는 형태로 만들어본다. 


<br></br>

### 2023.11.04
1. 진행한 것 : 회사 검색(조회) 기능(리스트로 불러와서 띄우기)
 - supabase에서, 두개의 테이블을 조회해서 가져와야한다. [참고할만한 링크](https://stackoverflow.com/questions/64996432/how-to-query-using-join-in-supabase)
 - 검색항목은 크게 3가지, 사업년도, 기업이름, 구인유무
   - 사업년도는 입력값보다 큰값을 가져온다. 빈칸인 경우 전부다 가져오기위함.
   - 기업이름은 포함한 형태로 가져온다.
   - 구인유무는 boolean으로 true, false이다. 
2. 진행한 것 : 구인처 상세정보 조회 데이터 관리!(상태관리)
- 현 컴포넌트에서, supabase에 접근하여 데이터를 가져오는 방법은 정보가 누락되는 경우의 수가 많이 생김
  - 이방법을 해결하기위해 여러가지 방법을 해봤으나, 상위 컴포넌트에서 데이터를 미리 받아 전달해주는 경우가 가장 좋은 방법 같았음. 
  - 대신 상위 컴포넌트에서 데이터를 받고 완료될 때까지 로딩페이지를 띄워주는 방법으로 적용

3. 의문사항 : useState으로 배열은 상태관리 할 수 없는 것 일까?
 
<br></br>

### 2023.11.03
1. 진행한 것 : phoneTemplate 구현
  - 칸을 3칸으로 나눠서 전화번호 입력
  - 3자리,4자리,4자리로 적용 
  - 앞에 자릿수 만큼 번호 입력하면 자동으로 다음으로 넘어가게 적용
2. 진행한 것 : RadioButton 선택event에 따른 값 변경 적용
  - 내가 원하는 라디오 리스트만큼 적용되며, 선택 박스에 맞춰 값 변경
3. 진행한 것 : file업로드 및 다운로드 확인 
  - supabase에서 제공하는 버킷 및 정책 생성
  - 파일 업로드 및 다운로드 기능 체크!
  - !! 맥북 한글파일 깨짐 이슈로 인해 업로드 안되는 이슈!!

<br></br>

### 2023.11.02
- 진행할 것 : supabase에 폼 저장기능 구현
  - 절차
    - supabase 다운(`yarn add @supabase/supabase-js`) 
    - 그리고 supabase를 세팅해줄 .tsx 파일 생성(위치: src/lib/supabase)
      - [공식홈페이지 참고](https://supabase.com/docs/guides/getting-started/quickstarts/nextjs)
  - 주의사항  
    - .env 사용시, Next.js의 경우는 변수명 앞에 `NEXT_PUBLIC`을 붙여줘야한다.(React의 경우 `REACT_APP`)
- 진행한 것 : LabelText id 불필요하여 제거(Template.md 변경!)
- 진행한 것 : form안에 들어갈 id, name, value, 저장할 값을 다 따로 작성하여 중복 이슈 및 유지보수 이슈 생김
  - 일단 id 값을 담는 배열 객체와, supabase에 넘길 데이터를 보관하는 객체와 인터페이스를 만듬(이게 효율적인지는 모름. id명이 하나 바뀌면 3개 다 바꿔야 되기 때문에..)

<br></br>


### 2023.11.01 
진행하는 것 :  API를 활용한 사업자 등록 번호 조회 구현  
- 사용한 라이브러리 : axios, swr
- 절차 
  - [공공 데이터 포털 사이트](https://www.data.go.kr/tcs/dss/selectDataSetList.do?keyword=%EC%82%AC%EC%97%85%EC%9E%90%EB%93%B1%EB%A1%9D%EC%A0%95%EB%B3%B4&brm=&svcType=&instt=&recmSe=N&conditionType=init&extsn=&kwrdArray=) 에 가입 (네이버 소셜로그인)
  - 국세청_사업자등록정보 진위확인 및 상태조회 서비스 오픈API 활용신청 (승인이 자동단계라 내용만 잘 적으면 됨)
  - API 호출 URL을 확인하기 위해 PostMan으로 확인!
  - 확인한 코드를 서비스에 구현! 
- API 호출시 주의사항!
  - `GET` METHOD가 아닌 `POST` METHOD 로만 제공!
  - `serviceKey` 개인이 활용승인때 받은 개인인증키이며, URL 에 querystring 으로 넣어주셔야 한다.
  - 진위여부 파악을 위한 API도 2가지가 있다. 
    - 현재 사업자 상태 조회(폐업인지, 운영중인지 정도) : 사업자등록번호만 있으면 됨
    - 현재 진위여부 확인 : 다양한 정보가 필요로함, 허나 잘 조회가 되지않음 
  - 현재 사업자 상태 조회만 확인! 


<br></br>

### 2023.10.31
- 웹 개발 비동기적 데이터 요청 이슈! 
- 비동기적 요청이 필요한 이유
  -  부분적으로 업데이트될 수 있기때문에, 사용자 경험 향상
  - 실시간 업데이트 가능!
  - 다중 작업 처리 가능!
- 이외에도 여러가지가 있으나, 일단 현재 페이지가 로드된 상태에서 추가적으로 작업을 할수 있는 것을 말하며, 대표적으로 ajax랑 axios가 있다.
  - [비동기처리 ajax랑 axios 차이](./learning/JavaScript.md)
- axios 사용방법
  - 먼저 해당 라이브러리를 설치해야된다. `yarn add axios` [사이트확인](https://classic.yarnpkg.com/en/package/axios)
  - 자연스레 따라오는 `swr` 도 설치 `yarn add swr`  [사이트 확인](https://swr.vercel.app/ko/docs/getting-started)
    - SWR은 먼저 캐시(stale)로부터 데이터를 반환한 후, fetch 요청(revalidate)을 하고, 최종적으로 최신화된 데이터를 가져오는 전략
      - 즉, 캐시 역할
    - SWR의 fetcher 함수는 원격 데이터를 가져오는데 사용되는 비동기 함수
      - 이 함수는 원격 데이터 소스에 접근하는 데 필요한 로직을 포함하며, 결과를 반환하거나 에러를 throw한다.
      - 기본적으로 fetcher 함수는 첫 번째 인자로 key을 받는다.(보통 api의 엔드포인트(URL))



<br></br>

### 2023.10.30
- 발견된 문제점: svg파일을 UI에 적용하는 문제!
- 현재까지 생각해낸 풀이: svg을 컴포넌트처럼 취급해서 사용해야된다. 하지만, 프로퍼티가 `JSX.IntrinsicElements` 타입에 존재하지 않는다는 오류 
  - 즉, Next.js에서 사용하는 TypeScript가 해당  SVG 컴포넌트 타입을 인식하지 못하여 발생한다.
  - TypeScript에게 SVG 파일이 React 컴포넌트로 사용될 수 있다는 것을 알려주어야 합니다.
- [정리문서로 이동](learning/svgToComponent.md)


<br></br>

### 2023.10.29(리펙토링)
- UI가 전체적으로 입력칸과 선택하는 칸이 매우 많다. 그렇기 때문에 이것을 템플릿화 하면 보다 좋은 효율을 낼 수 있을 것 같았다.
  - 처음에는 비용이 꽤 들더라도, 이후에는 속도가 붙어서 만들기 쉬워질 것이라고 판단했기 때문. 
- 하지만, 템플릿화도 체계적이지 않고 우후죽순으로 만들게 되면 오히려 어떤것을 활용해야되는지 판단이 떨어질 뿐만아니라 속도도 늦어지는 악순환의 반복이다.(사서 고생하는 격..)
- 그렇기 때문에 일단 어떤 것이 템플릿화가 필요한지 정리하고 기록하는 것이 먼저라! 바로 정리해보았다.   
- [정리문서로 이동](Template.md)




<br></br>

### 2023.10.28
- 기능 : 사이드바 아이콘 클릭시 조회, 등록으로 이동하고 , 상세페이지는 별도로 구현하기
- 고민한 목록 : 사이드바를 계속해서 레이아웃에 남겨놓고, 나머지부분을 클릭할때마다 변경을 해주려고 했는데, 상태관리 이슈가 떴다.
  - 여기서 해결방법으로 상태관리 라이브러리를 사용해도 되지만, 퍼포먼스를 위해 자체적으로 해결할 수 있을 것이라 생각
  - 이때, 기존 페이지를 버린다면, 가능하다고 생각하여, 구인처 클릭시 layout을 삭제, 과감히 페이지만 사용했다. 
  
<br></br>

### 2023.10.26
- 기능 : 사이드바  컴포넌트로 만드는 중 
- 사용한 라이브러리 : @heroicons
  - 라이브러리 설명 : 웹사이트에서 흔히 쓰는 아이콘 라이브러리
  - 참고링크 [라이브러리 이해 참고 링크](https://reactnativeexample.com/react-native-hero-icons/)

- 다운 링크 : [@heroicons/react](https://classic.yarnpkg.com/en/package/@heroicons/react#readme) - 사용 이유: 사이드바 사용시, 돋보기(조회아이콘) 및 등록아이콘을 사용하기 위해